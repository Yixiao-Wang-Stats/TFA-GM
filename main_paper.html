<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Static Diagram with LaTeX</title>

<!-- KaTeX -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {delimiters: [{left: '$', right: '$', display: false}]});"></script>

<style>
  body {
    background: white;
    display: flex;
    justify-content: center;
    padding: 40px;
    position: relative;
  }
  svg {
    position: absolute;
    top: 0;
    left: 0;
  }
  .formula {
    position: absolute;
    font-size: 28px;
  }
</style>
</head>
<body>

<!-- SVG 图形 -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">

  <!-- Model box -->
  <rect x="100" y="80" width="80" height="40" rx="5" fill="#7a003c"/>
  <text x="140" y="102" font-size="16" fill="white" text-anchor="middle" alignment-baseline="middle">Model</text>

  <!-- Solver box (left) -->
  <rect x="90" y="200" width="100" height="40" rx="5" fill="#999"/>
  <text x="140" y="222" font-size="16" fill="white" text-anchor="middle" alignment-baseline="middle">Solver</text>

<!-- 首先出现的就是这个 -->
    <!-- Model box -->
  <rect x="295" y="80" width="80" height="40" rx="5" fill="#7a003c"/>
  <text x="335" y="102" font-size="16" fill="white" text-anchor="middle" alignment-baseline="middle">Model</text>

<!-- 过了几秒原本的消失 渐变为下面这个，说明不过model -->
  <!-- Model box (right, faded) -->
  <rect x="295" y="80" width="80" height="40" rx="5" fill="#ddd"/>
  <text x="335" y="102" font-size="16" fill="#bbb" text-anchor="middle" alignment-baseline="middle">Model</text>

  <!-- Solver box (right) -->
  <rect x="285" y="200" width="100" height="40" rx="5" fill="#999"/>
  <text x="335" y="222" font-size="16" fill="white" text-anchor="middle" alignment-baseline="middle">Solver</text>

  
  <!-- Arrow: x_t-1 to Model -->
  <!-- left arrow -->
  <line x1="325" y1="60" x2="325" y2="75" stroke="black" />

  <!-- right arrow -->
  <line x1="350" y1="60" x2="350" y2="75" stroke="black" />
 
  <!-- Arrow: Model to ψ_t-1 -->
   <!-- left arrow -->
  <line x1="325" y1="120" x2="325" y2="195" stroke="black" marker-end="url(#arrow)"/>
  <!-- right arrow 1-->
   <line x1="350" y1="120" x2="350" y2="145" stroke="black" marker-end="url(#arrow)"/>
     <!-- right arrow 2 -->
  <line x1="350" y1="170" x2="350" y2="195" stroke="black" marker-end="url(#arrow)"/>


    <!-- Arrow: x_t to Model -->
  <!-- left arrow -->
  <line x1="130" y1="60" x2="130" y2="75" stroke="black" />

  <!-- right arrow -->
  <line x1="155" y1="60" x2="155" y2="75" stroke="black" />
 

  <!-- Arrow: Model to ψ_t -->
   <!-- left arrow -->
  <line x1="130" y1="120" x2="130" y2="195" stroke="black" marker-end="url(#arrow)"/>
  <!-- right arrow 1-->
   <line x1="155" y1="120" x2="155" y2="145" stroke="black" marker-end="url(#arrow)"/>
     <!-- right arrow 2 -->
  <line x1="155" y1="170" x2="155" y2="195" stroke="black" marker-end="url(#arrow)"/>



  <!-- Arrow: bypass -->
  <!-- <path d="M180 80 V50 H540 V80" fill="none" stroke="black" marker-end="url(#arrow)"/> -->
  <path d="M143 240 V260 H200 V50 H315" fill="none" stroke="black" marker-end="url(#arrow)"/>
  <text x="240" y="105" font-size="16" fill="black">Bypass</text>

  <!-- 以下两个arrow随着 灰块出现，hat出现 一起出现 -->
  <!-- Curved arrow ψ_t to ψ̂_{t-1} -->
  <path d="M 170 160 Q 260 200 330 170" fill="none" stroke="#3a3a75" stroke-width="3" marker-end="url(#arrow-blue)"/>

  <!-- Curved arrow ψ_previous to ψ̂_{t-1} -->
  <path d="M 70 180 Q 260 200 330 170" fill="none" stroke="#3a3a75" stroke-width="3" marker-end="url(#arrow-blue)"/>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5"
            markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="black"/>
    </marker>
    <marker id="arrow-blue" viewBox="0 0 10 10" refX="5" refY="5"
            markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#3a3a75"/>
    </marker>
  </defs>
</svg>

<!-- 公式定位（位置已优化） -->
<div class="formula" style="left:260px; top:70px;">$x_t$</div>
<div class="formula" style="left:610px; top:70px;">$x_{t-1}$</div>
<div class="formula" style="left:280px; top:275px;">$\psi_t$</div>
<!-- 首先出现的是 psi_{t-1} -->
<div class="formula" style="left:630px; top:275px;">$\psi_{t-1}$</div>
<!-- 然后随着上面消失块出现 \hat{psi}_{t-1}也出现 -->
<div class="formula" style="left:630px; top:275px;">$\hat{\psi}_{t-1}$</div>

<!-- 伴随着两条剪头出现的 -->
<div class="formula" style="left:400px; top:350px;">$2\psi_t - \psi_{t+1}$</div>


</body>
</html>

